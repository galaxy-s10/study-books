# vue 和 react 区别

## 共同点

- 数据驱动视图
- 组件化
- 都使用虚拟 dom
- 都使用 diff 算法（但是具体算法不一样）

## 门槛

就日常使用来说，react 因为使用 jsx，更考验开发者的 js 功底。而 vue 的话，其实不管是 2 还是 3，个人感觉都是比较快上手的。

就框架性能来说，不同人写出来的 vue 代码，性能其实都差不多，因为 vue 内部给你做了很多优化；但是不同人写 react，性能可能差距就很大了，它有很多性能优化的 api 比如 memo，useMemo，useCallback 之类的，合理的用这些 api 可以减少重复的渲染提高性能，但是你不用他的话，其实也行，只是性能差，但也不会影响业务流程，只是会造成多余的重复渲染。

## 样式处理

react 没有对样式进行处理，需要用户自己处理，比较流行方案有 css-in-js（即 styled-compoents）和 css-module

vue 有 style 模块

## 响应式

vue 是 mutable+依赖收集实现的响应式，即可变的数据结构+自动收集依赖，原理是 Object.definedProperty 或者 Proxy 和发布订阅模式

react 是 immutabe+反复执行渲染函数实现的响应式，即强调数据不可变+手动触发更新，原理是 fiber 架构

## vue2 和 react

主要区别是灵活性，vue2 的 option api 和 react 的 tsx 没有可比性，一个是类似按部就班的写法，一个是函数式编程，很灵活

## vue3 和 react

vue3 主要是 composition api 和 setup，它和 react 的 hook 概念很接近，但是注意它们因为响应式的不同，因此 hooks 也有个本质的区别，vue3 的 hook 不需要手动管理依赖，而 react 内置的 hooks 是需要开发者手动管理依赖的（有闭包陷阱的问题）

# vue2 响应式

## 数组

vue2 底层重写了数组的七个方法让他们具备响应式，以及对整个数组进行了响应式处理，但并没有对数组的下标进行响应式处理

```vue
<script>
export default {
  data() {
    return {
      arr: [1, 2, 3, { age: 18 }],
    };
  },
  methods: {
    editArr() {
      // this.arr[1] = 20; // 不是响应式的
      // this.$set(this.arr, 1, 20); // 是响应式的
      // this.arr[3] = 123; // 不是响应式的
      this.arr[3].age = 20; // 是响应式的，虽然没有劫持this.arr[3]的set和get方法，但是有劫持this.arr[3].age的set和get方法
    },
  },
};
</script>
```

## 对象

无法对新增的属性添加响应式

```vue
<script>
export default {
  data() {
    return {
      obj: { age: 18 },
    };
  },
  methods: {
    editObj() {
      // this.obj.sex = 1; // 不是响应式的
      this.$set(this.obj, 'sex', 1); // 是响应式的
      // this.obj = { sex: 1 }; // 是响应式的
      console.log(this.obj);
    },
  },
};
</script>
```
