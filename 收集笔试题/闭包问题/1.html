<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

    <ul>
        <li>li1</li>
        <li>li2</li>
        <li>li3</li>
        <li>li4</li>
    </ul>

    <script type="text/javascript">
        window.onload = function () {
            var li = document.getElementsByTagName("li");

            // 
            for (var i = 0; i < li.length; i++) {
                li[i].onclick = function () {
                    console.log(i); //全是4
                }
            }

            // for (var i = 0; i < li.length; i++) {
            //     console.log(i);
            //     li[i].onclick = function (num) {
            //         return function () {
            //             console.log(num);
            //         }
            //     }(i)

            // }

            // for (var i = 0; i < li.length; i++) {
            //     console.log(i);
            //     li[i].val = i
            //     li[i].onclick = function () {
            //         console.log(this.val);
            //     }
            // }

            // for (var i = 0; i < li.length; i++) {
            //     console.log(i);
            //     (function (num) {
            //         li[i].onclick = function () {
            //             console.log(num);
            //         }
            //     })(i)

            // }
            // for (let i = 0; i < li.length; i++) {
            //     console.log(i);
            //     li[i].onclick = function () {
            //         console.log(i);
            //     }
            // }
            // console.log(i);

            // var res = []
            // var a = 3
            // var total = 0
            // function foo(a) {
            //     var i = 0
            //     for (; i < 3; i++) {
            //         res[i] = function () {
            //             total += i * a
            //             console.log(total)
            //         }
            //     }
            // }
            // foo(1)
            // res[0]()    //3
            // res[1]()    //6
            // res[2]()    //9


            var res = []
            var a = 3
            var total = 0
            function foo() {
                var i = 0
                for (; i < 3; i++) {
                    res[i] = function () {
                        total += i * a
                        console.log(total)
                    }
                }
            }
            foo()
            res[0]()    //9
            res[1]()    //18
            res[2]()    //27
        }
    </script>


</body>

</html>